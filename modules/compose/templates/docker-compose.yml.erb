# ###################################
# This file is generated by puppet
# PLEASE DON'T MODIFY BY HAND
# ###################################

che:
  image: eclipse/che-server:<%= scope.lookupvar('compose::che_version') %>
  env_file:
    - '<%= scope.lookupvar('compose::che_instance') -%>/config/che.env'
  volumes:
    - '/var/run/docker.sock:/var/run/docker.sock'
    - '<%= scope.lookupvar('compose::che_instance') -%>/data:/data'
    - '<%= scope.lookupvar('che::che_instance') -%>/config:/conf'
<% if scope.lookupvar('che::che_env') != 'production' -%>
    - '<%= scope.lookupvar('compose::che_assembly') -%>:/assembly'
<% end -%>
  ports:
    - '<%= scope.lookupvar('compose::che_port') -%>:8080'
<% if scope.lookupvar('che::che_env') != 'production' -%>
    - '8000:8000'
<% end -%>
  restart: always
  container_name: che
